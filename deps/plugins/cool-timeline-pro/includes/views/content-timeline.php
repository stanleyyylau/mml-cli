<?php$ctl_options_arr = get_option('cool_timeline_options');$timeline_skin = isset($attribute['skin']) ? $attribute['skin'] : 'default';$wrp_cls = '';$wrapper_cls = '';$post_skin_cls = '';if ($timeline_skin == "light") {    $wrp_cls = 'light-timeline';    $wrapper_cls = 'light-timeline-wrapper';    $post_skin_cls = 'white-post';} else if ($timeline_skin == "dark") {    $wrp_cls = 'dark-timeline';    $wrapper_cls = 'dark-timeline-wrapper';    $post_skin_cls = 'black-post';} else {    $wrp_cls = 'white-timeline';    $post_skin_cls = 'light-grey-post';    $wrapper_cls = 'white-timeline-wrapper';}$output = '';$ctl_html = '';$ctl_format_html = '';/* * Gerneral options *///  $ctl_timeline_type = $ctl_options_arr['timeline_type'];$ctl_title_text = $ctl_options_arr['title_text'];$ctl_title_tag = $ctl_options_arr['title_tag'];//  $ctl_title_pos = $ctl_options_arr['title_pos'];$scroll_effects = $ctl_options_arr['scroll_effects'] ? $ctl_options_arr['scroll_effects'] : 'none';$stories_images_link = $ctl_options_arr['stories_images'];//	var_dump($animation_timing);switch ($scroll_effects) {    case 'scale':        $animation_type = 'transform: scale(0.5);transition: all 0.5s';        $animation_type_end = 'transform: scale(1);';        $ctl_animation = 'data--20-bottom-top="' . $animation_type . '"data--50-bottom-bottom="' . $animation_type_end . '"';        break;    case 'fade':        $animation_type = 'opacity:0;transition: all 0.5s;';        $animation_type_end = 'opacity:1;';        $ctl_animation = 'data--40-bottom-top="' . $animation_type . '"data--60-bottom-bottom="' . $animation_type_end . '"';        break;    case 'slideout':        $animation_type = 'opacity: 0;left: 50px;';        $animation_type_end = 'opacity: 1;left: 0;';        $ctl_animation = 'data--20-bottom-top="' . $animation_type . '"data--50-bottom-bottom="' . $animation_type_end . '"';        break;    case 'flip':        $animation_type = 'transform: rotateX(-90deg); opacity: 0;';        $animation_type_end = 'transform: rotateX(0deg); opacity: 1;';        $ctl_animation = 'data--10-bottom-top="' . $animation_type . '"data--80-bottom-bottom="' . $animation_type_end . '"';        break;    case 'rotate-skew':        $animation_type = 'transform:scale(0) rotate(0deg);';        $animation_type_end = 'transform:scale(1) rotate(1440deg);opacity:1;';        $ctl_animation = 'data--40-bottom-top="' . $animation_type . '"data--80-bottom-bottom="' . $animation_type_end . '"';        break;    case 'none':        $ctl_animation = '';        break;    default;        $animation_type = 'opacity:0;transition: all 0.5s;';        $animation_type_end = 'opacity:1;';        $ctl_animation = 'data--40-bottom-top="' . $animation_type . '"data--60-bottom-bottom="' . $animation_type_end . '"';        break;}if (isset($ctl_options_arr['user_avatar']['id'])) {    $user_avatar = wp_get_attachment_image_src($ctl_options_arr['user_avatar']['id'], 'ctl_avatar');}/* * content settings */$default_icon = isset($ctl_options_arr['default_icon'])?$ctl_options_arr['default_icon']:'';$r_more= $ctl_options_arr['display_readmore']?$ctl_options_arr['display_readmore']:"yes";$ctl_post_per_page = $ctl_options_arr['post_per_page'];$story_desc_type = $ctl_options_arr['desc_type'];// $ctl_no_posts = isset($ctl_options_arr['no_posts']) ? $ctl_options_arr['no_posts'] : "No timeline story found";$ctl_content_length = $ctl_options_arr['content_length'];$ctl_posts_orders = $ctl_options_arr['posts_orders'] ? $ctl_options_arr['posts_orders'] : "DESC";$disable_months = $ctl_options_arr['disable_months'] ? $ctl_options_arr['disable_months'] : "no";$title_alignment = $ctl_options_arr['title_alignment'] ? $ctl_options_arr['title_alignment'] : "center";$title_visibilty = $ctl_options_arr['display_title'] ? $ctl_options_arr['display_title'] : "yes";$slider_animation = $ctl_options_arr['slider_animation'] ? $ctl_options_arr['slider_animation'] : "slide";$ctl_slideshow = $ctl_options_arr['ctl_slideshow'] ? $ctl_options_arr['ctl_slideshow'] : true;$animation_speed = $ctl_options_arr['animation_speed'] ? $ctl_options_arr['animation_speed'] : 7000;//$ctl_posts_order='date';$enable_navigation = $ctl_options_arr['enable_navigation'] ? $ctl_options_arr['enable_navigation'] : 'yes';$navigation_position = $ctl_options_arr['navigation_position'] ? $ctl_options_arr['navigation_position'] : 'right';$enable_pagination = $ctl_options_arr['enable_pagination'] ? $ctl_options_arr['enable_pagination'] : 'no';/* * images sizes */$ctl_post_per_page = $ctl_post_per_page ? $ctl_post_per_page : 10;$ctl_avtar_html = '';$timeline_id = '';$clt_icons='';if (isset($attribute['icons']) && $attribute['icons']=="YES"){    $clt_icons='icons_yes';}else{    $clt_icons='icons_no';}$ctl_html_no_cont = '';$ctl_title_tag = $ctl_title_tag ? $ctl_title_tag : 'H2';//$ctl_title_pos = $ctl_title_pos ? $ctl_title_pos : 'left';$ctl_content_length ? $ctl_content_length : 100;if (isset($ctl_options_arr['custom_date_formats']) && !empty($ctl_options_arr['custom_date_formats'])) {    $date_formats = $ctl_options_arr['custom_date_formats'] ? $ctl_options_arr['custom_date_formats'] : "M d";} else {    $date_formats = $ctl_options_arr['ctl_date_formats'] ? $ctl_options_arr['ctl_date_formats'] : "M d";}$layout_wrp = '';$format = __('d/M/Y', 'cool-timeline');$output = '';$year_position = 2;$display_year ='';$args = array();$cat_timeline = array();$args['post_type'] =$attribute['post-type'];if ($attribute['show-posts']) {    $args['posts_per_page'] = $attribute['show-posts'];} else {    $args['posts_per_page'] = $ctl_post_per_page;}$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;$args['post_status'] = array('publish');if ($enable_pagination == "yes") {    $args['paged'] = $paged;}$stories_order = '';if ($attribute['order']) {    $args['order'] = $attribute['order'];    $stories_order = $attribute['order'];} else {    $args['order'] = $ctl_posts_orders;    $stories_order = $ctl_posts_orders;}$spy_ele = '';$i = 0;$row = 1;$ctl_html_no_cont = '';if ($attribute['layout'] == "one-side") {    $layout_cls = 'one-sided';    $layout_wrp = 'one-sided-wrapper';} else {    $layout_cls = '';    $layout_wrp = 'both-sided-wrapper';}$ctl_loop = new WP_Query($args);if ($ctl_loop->have_posts()) {    while ($ctl_loop->have_posts()) : $ctl_loop->the_post();        global $post;        $container_cls = 'full';        $posted_date=get_the_date(__("$date_formats",'cool-timeline'));        $post_date = explode('/',get_the_date(__("D/M/Y",'cool-timeline')));        $post_year = (int)$post_date[$year_position];        if ($story_desc_type == 'full') {            $story_cont = apply_filters('the_content', $post->post_content);        } else {            $read_m_btn='';             if ($r_more == 'yes') {                    $read_m_btn= '..<a class="read_more ctl_read_more" href="' . get_permalink(get_the_ID()) . '">' . __('Read more', 'cool-timeline') . '</a>';                }            $story_cont = "<p>" . get_the_excerpt() . $read_m_btn. "</p>";          }        if ('' != $story_cont) {            $post_content = $story_cont;        }//$posted_date=get_the_date(__("$date_formats",'cool-timeline'));         $ctl_thumb = wp_get_attachment_image_src(get_post_thumbnail_id(get_the_ID()), 'large');        $ctl_thumb_url = $ctl_thumb['0'];        $ctl_thumb_width = $ctl_thumb['1'];        $ctl_thumb_height = $ctl_thumb['2'];        $s_l_close='';        if ($stories_images_link =="popup") {            $img_f_url = wp_get_attachment_url(get_post_thumbnail_id($post->ID));            $story_img_link = '<a title="' . get_the_title() . '"  href="' . $img_f_url . '" class="ctl_prettyPhoto">';            $s_l_close='</a>';        } else if ($stories_images_link == "single") {            $story_img_link = '<a title="' . get_the_title() . '"  href="' . get_the_permalink() . '" class="single-page-link">';            $s_l_close='</a>';        } else if ($stories_images_link == "disable_links") {            $story_img_link = '';            $s_l_close='';        }        else {            $s_l_close='';            $story_img_link = '<a title="' . get_the_title() . '"  href="' . get_the_permalink() . '" class="">';        }            if (isset($ctl_thumb_url) && !empty($ctl_thumb_url)) {                $ctl_format_html .= '<div class="full-width">' . $story_img_link . '<img  class="events-object" src="' . $ctl_thumb_url . '">'.$s_l_close.'</div>';              }        if ($i % 2 == 0) {            $even_odd = "even";        } else {            $even_odd = "odd";        }        if ($post_year != $display_year) {            $display_year = $post_year;            $ctle_year_lbl = sprintf('<span class="ctl-timeline-date">%s</span>', $post_year);            if (isset($attribute['icons']) && $attribute['icons'] == "YES") {                $ctl_html .= '<div class="timeline-year  scrollable-section" data-section-title="' . $post_year . '" id="clt-' . $post_year . '">            <div class="icon-placeholder">' . $ctle_year_lbl . '</div>            <div class="timeline-bar"></div>        </div>';            } else {                $ctl_html .= '<div class="timeline-year scrollable-section"     data-section-title="' . $post_year . '" id="clt-' . $post_year . '">            <div class="icon-placeholder">' . $ctle_year_lbl . '</div>            <div class="timeline-bar"></div>        </div>';            }        }        $ctl_html .= '<!-- .timeline-post-start-->';        $ctl_html .= '<div class="timeline-post ' . $even_odd . ' ' . $post_skin_cls .' '.$clt_icons . '">            <div class="timeline-meta">';        if ($disable_months == "no") {            $ctl_html .= '<div class="meta-details">' . $posted_date . '</div>';        }        $ctl_html .= '</div>';        $post_icon=get_fa(true);        if(isset($post_icon)){            $icon=$post_icon;        }else{            if(isset($default_icon)&& !empty($default_icon)){                $icon='<i class="fa '.$default_icon.'" aria-hidden="true"></i>';            }else {                $icon = '<i class="fa fa-clock-o" aria-hidden="true"></i>';            }        }        if (isset($attribute['icons']) && $attribute['icons'] == "YES") {            $ctl_html .='<div class="timeline-icon icon-larger iconbg-turqoise icon-color-white">                    	<div class="icon-placeholder">'.$icon.'</div>                        <div class="timeline-bar"></div>                    </div>';        }else {            $ctl_html .= '<div class="timeline-icon icon-dot-full">                        <div class="timeline-bar"></div>                    </div>';        }        $ctl_html .= '<div ' . $ctl_animation . '  " id="' . $row . '" class="timeline-content  clearfix ' . $even_odd . '  ' . $container_cls . '">';        $ctl_html .= '<h2 class="content-title"><a href="'.get_the_permalink().'">' . get_the_title() . '</a></h2>';        $ctl_html .= '<div class="ctl_info event-description ">';        $ctl_html .= $ctl_format_html;        $ctl_html .= '<div class="content-details"> ' . $post_content ;        $ctl_html .= '<div class="post_meta_details">';        $ctl_html .= ctl_entry_taxonomies();        $ctl_html .=ctl_post_tags();        $ctl_html .= '</div></div></div>';//$ctl_html .=clt_social_links();        $ctl_html .= '</div><!-- timeline content --></div><!-- .timeline-post-end -->';        if ($row >= 3) {            $row = 0;        }        $row++;        $i++;        $ctl_format_html = '';        $post_content = '';    endwhile;    wp_reset_postdata();} else {    $ctl_html_no_cont .= '<div class="no-content"><h4>';    //$ctl_html_no_cont.=$ctl_no_posts;    $ctl_html_no_cont .= __('Sorry,You have not added any story yet', 'cool-timeline');    $ctl_html_no_cont .= '</h4></div>';}$ctl_html .= '<div class="clearfix"></div>';if ($enable_pagination == "yes") {    if (function_exists('custom_pagination')) {        $ctl_html .= custom_pagination($ctl_loop->max_num_pages, "", $paged);    }}$output .= '  <!-- Cool content timeline  ================================================== -->    <div class="cool_timeline cool-timeline-wrapper  ' . $layout_wrp . ' ' . $wrapper_cls . '" data-pagination="' . $enable_navigation . '"  data-pagination-position="' . $navigation_position . '">';$output .= $ctl_avtar_html;if ($title_visibilty == "yes") {    $output .= sprintf(__('<%s class="timeline-main-title center-block">%s</%s>', 'cool-timeline'), $ctl_title_tag, $ctl_title_text, $ctl_title_tag);}$output .= '<div class="cool-timeline ultimate-style ' . $layout_cls . ' ' . $wrp_cls . '">';//$output .= '<div id="' . $timeline_id . '" class="timeline cooltimeline_cont '.$clt_icons.'">';$output .= $ctl_html;$output .= $ctl_html_no_cont;$output .= '</div>			</div>    </div>  <!-- end ================================================== -->';